(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-484a751e"],{"0f05":function(t,e,a){},"1ac9":function(t,e,a){"use strict";a("2d7b")},"2d7b":function(t,e,a){},3813:function(t,e,a){},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},4560:function(t,e,a){"use strict";a.r(e);a("ac6a"),a("456d");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row w-100 ml-1 my-2"},[e("button",{staticClass:"btn btn-light ml-4 btn-sm btn-iview-size",attrs:{disabled:!0}},[t._v("已配置通道 "+t._s(t.usedNos.length)+"/"+t._s(t.availNos.length))])]),e("div",{staticClass:"row w-100 row-cols-xl-6 row-cols-md-3 row-cols-sm-3 text-center",staticStyle:{width:"18rem"}},t._l(Object.keys(t.algorithmInfo),(function(n,i){return e("div",{key:"alg"+t.uniqueId+i,staticClass:"col mb-4",staticStyle:{"padding-bottom":"0%"}},[e("div",{staticClass:"card border-0 h-100"},[e("img",{staticClass:"card-img",attrs:{src:a("ba58")}}),e("div",{staticClass:"card-img-overlay"},[e("div",{staticClass:"iconbox"},[e("img",{staticClass:"card-img-top",staticStyle:{width:"50px"},attrs:{src:t.algorithmInfo[n].icon,alt:t.algorithmInfo[n].name_ch}})]),e("div",{staticClass:"card-body",staticStyle:{"font-size":"16px"}},[e("p",{staticClass:"card-text mb-4"},[e("b",[t._v(t._s(t.algorithmInfo[n].name_ch)+"识别")])]),e("p",{staticClass:"mb-4",staticStyle:{color:"#fff"}},[t._v("已配置："),e("b",[t._v(t._s(t.algorithmInfo[n].count))])]),e("button",{staticClass:"btn btn-primary mt-4 btn-sm btn-iview-size",on:{click:function(e){return t.jumpToConfig(n)}}},[t._v("配置通道")])])])])])})),0)])},i=[],s=(a("6b54"),a("55dd"),a("2909")),l=a("fa7d"),o=a("0be2"),r=a("8715"),c=function(){var t=this,e=t._self._c;return e("SimpleModalDlg",{attrs:{modalId:t.modalId,title:"算法配置 - ".concat(t.currAlg.name_ch,"识别"),content:"",defaultButtonText:"取消",button2Text:"确定",button2Action:t.saveStatus,dialogWidth:1100},scopedSlots:t._u([{key:"bodyPost",fn:function(){return[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-3"},[e("div",{staticClass:"w-100 overflow-auto border-top border-bottom alg-left-panel"},[e("div",[e("p",{staticClass:"field-label"},[t._v("请选择通道")])]),e("ChannelSelectionGrid",{attrs:{channelNames:t.channelNames,channelConfigured:t.channelConfigured},model:{value:t.selectedCno,callback:function(e){t.selectedCno=e},expression:"selectedCno"}})],1)]),e("div",{staticClass:"col-9 pl-0"},[e("div",{staticClass:"w-100 overflow-auto border-top border-bottom container-fluid",staticStyle:{height:"620px"}},[e("ChannelAlgConfigPanel",{attrs:{algDisplayName:"来自于算法配置",channelImage:t.channelImage,modalShown:t.modalShown,defaultParameters:t.defaultParameters},model:{value:t.algStatus[t.selectedCno-1],callback:function(e){t.$set(t.algStatus,t.selectedCno-1,e)},expression:"algStatus[selectedCno-1]"}})],1)])])])]},proxy:!0}])})},u=[],d=(a("8e6e"),a("7f7f"),a("ade3")),m=(a("6c7b"),a("f953")),h=a("1157"),g=a.n(h),f=a("b84e"),p=a("6da7"),v=a("f121");function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function w(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(Object(a),!0).forEach((function(e){Object(d["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var y={name:"AlgorithmAlgConfigDlg",components:{SimpleModalDlg:m["a"],ChannelAlgConfigPanel:f["a"],ChannelSelectionGrid:p["a"]},data:function(){return{algStatus:new Array(v["a"].maxChannels).fill(0).map((function(){return w({configured:!1},r["a"].defaultAlgParams)})),dateTimeSettingShown:!1,channelImage:"",modalShown:!1,defaultParameters:{},selectedCno:1,channelIds:new Array(v["a"].maxChannels).fill(0),channelNames:new Array(v["a"].maxChannels).fill("")}},props:{modalId:{type:String,required:!0},currAlg:{type:Object,required:!0}},computed:{channelConfigured:function(){return this.algStatus.map((function(t){return t.configured}))}},methods:{saveStatus:function(){var t=this,e="channel/channels/config_alg_by_channel/",a={alg_name:this.currAlg.name,status:this.algStatus};o["a"].apiAjaxPost(e,a,(function(e){0===e.code?(alert("算法配置保存成功！"),t.$emit("alg-channel-saved")):alert("算法配置保存失败(".concat(e.code,"): ").concat(e.message)),t.loadAlgorithmChannels()}),l["a"].defaultApiErrorHandler(e,""))},recordToStatus:function(t){var e={};return Object.keys(this.defaultParameters).forEach((function(a){e[a]=t[a]})),e.configured=!0,e},loadChannelImage:function(){var t=this,e=this.channelIds[this.selectedCno-1];if(e){var a="channel/channels/".concat(e,"/get_real_time_image/");o["a"].apiAjaxGet(a,{},(function(e){0===e.code&&e.data&&(t.channelImage=l["a"].getImageUrl(e.data.filename))}),l["a"].defaultApiErrorHandler(a,""))}},loadDefaultParameters:function(){var t=this,e="algorithm/algorithmdefaultparameters/get_default/";o["a"].apiAjaxGet(e,{},(function(e){if(0===e.code)if(e.data.length>0)for(var a in t.defaultParameters={},r["a"].defaultAlgParams)t.defaultParameters[a]=e.data[0][a];else t.defaultParameters=w({},r["a"].defaultAlgParams)}),l["a"].defaultApiErrorHandler(e,""))},loadAlgorithmChannels:function(){var t=this,e="channel/channelalgorithms2/?algorithm=".concat(this.currAlg.id);o["a"].apiAjaxGet(e,{},(function(e){if(0===e.code){for(var a in t.algStatus)t.algStatus[a]=w({configured:!1},r["a"].defaultAlgParams);e.data.forEach((function(e){t.algStatus[e.channel.cno-1]=t.recordToStatus(e)})),console.log("loadAlgorithmChannels",t.algStatus)}else console.log("获取通道算法失败！")}),l["a"].defaultApiErrorHandler(e,""))},loadChannels:function(){var t=this,e="channel/channels/";o["a"].apiAjaxGet(e,{},(function(e){if(0===e.code)for(var a in t.channelNames.fill(""),e.data)t.channelNames[e.data[a].cno-1]=e.data[a].name,t.channelIds[e.data[a].cno-1]=e.data[a].id}),l["a"].defaultApiErrorHandler(e,""))}},watch:{selectedCno:function(){console.log("selectedCno changed",this.selectedCno),this.loadChannelImage()},currAlg:function(){console.log("currAlg changed",this.currAlg),this.loadAlgorithmChannels()},algStatus:{handler:function(){},deep:!0}},mounted:function(){var t=this;g()("#".concat(this.modalId)).on("shown.bs.modal",(function(){t.modalShown=!0,t.loadChannelImage()})),g()("#".concat(this.modalId)).on("hide.bs.modal",(function(){t.modalShown=!1})),this.loadChannels(),this.loadDefaultParameters(),this.loadAlgorithmChannels()}},A=y,C=(a("9289"),a("2877")),I=Object(C["a"])(A,c,u,!1,null,null,null),N=I.exports,j={name:"ModuleAlgorithm",components:{AlgorithmAlgConfigDlg:N},data:function(){return{uniqueId:l["a"].randomId("unique"),algConfigDlgId:l["a"].randomId("modalId"),algorithmInfo:r["a"].getAlgNameIcons(),cameraImg:a("63bb"),freeNos:[1,2,3,4,5,6,7,8],usedNos:[],currAlgName:"human"}},computed:{availNos:function(){var t=[].concat(Object(s["a"])(this.freeNos),Object(s["a"])(this.usedNos));return t.sort()},currAlg:function(){return{name:this.currAlgName,id:this.algorithmInfo[this.currAlgName].id,name_ch:this.algorithmInfo[this.currAlgName].name_ch}}},methods:{getUsedFreeChannels:function(){var t=this,e="channel/channels/get_used_free_channel_nos/";o["a"].apiAjaxGet(e,{},(function(e){0===e.code&&(t.freeNos=e.data.free_nos,t.usedNos=e.data.used_nos)}),l["a"].defaultApiErrorHandler(e,""))},getAlgorithmOutline:function(){var t=this,e="channel/channelalgorithms/groupby/?by=algorithm__name&count=id";o["a"].apiAjaxGet(e,{},(function(e){if(0===e.code){for(var a in t.algorithmInfo=r["a"].getAlgNameIcons(),t.algorithmInfo)t.algorithmInfo[a].count="0";e.data.forEach((function(e){e.algorithm__name in t.algorithmInfo&&(t.algorithmInfo[e.algorithm__name].count=e.count_id.toString())})),console.log("channel/channelalgorithms/groupby/",t.algorithmInfo)}}),l["a"].defaultApiErrorHandler(e,""))},jumpToConfig:function(t){this.currAlgName=t,this.$router.push({path:"algorithmconfig_page"}),window.currAlg=this.currAlg}},mounted:function(){this.getUsedFreeChannels(),this.getAlgorithmOutline()}},D=j,O=(a("a63d"),Object(C["a"])(D,n,i,!1,null,null,null));e["default"]=O.exports},5289:function(t,e,a){t.exports=a.p+"img/channel-configured.b36629f9.png"},"63bb":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAeCAYAAADHJYVoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHLmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIyLTA2LTE1VDIyOjQ1OjMwKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIyLTA2LTE1VDIyOjQ1OjMwKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wNi0xNVQyMjo0NTozMCswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0ZTM3YmU5Zi1iYWI4LTJiNGUtOWNlNC0yOWI4ZDZiMzViZjciIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0ZjEyMWFjNy1lNzU3LWYzNDctYmMyNS1kYzNlNjlmYmJmY2YiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkYmNiYzQyMi03MDg1LTcyNDItYmYzOS01MmQ0MmUwYTBhZmQiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpkYmNiYzQyMi03MDg1LTcyNDItYmYzOS01MmQ0MmUwYTBhZmQiIHN0RXZ0OndoZW49IjIwMjItMDYtMTVUMjI6NDU6MzArMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NGUzN2JlOWYtYmFiOC0yYjRlLTljZTQtMjliOGQ2YjM1YmY3IiBzdEV2dDp3aGVuPSIyMDIyLTA2LTE1VDIyOjQ1OjMwKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDo4ZWRjY2ExYS04MzcwLTFkNDctYjg5MC0yODg2OGJhNzBiMzg8L3JkZjpsaT4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6ZGM3MDVhNDktZmFjYy0xMTQxLTk5NmEtNmExMmE1MDJlNzZjPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDozZTgzN2NlMC1iYzFiLTQ2NTAtYmY0ZC0zNjkwNGYzZDg1ZmY8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOmU5NjFhNDM5LTEwMDQtNTk0Zi04YTdkLTJkMWZkNGQ1MzJjYTwvcmRmOmxpPiA8L3Jk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"},6516:function(t,e,a){},"6b54":function(t,e,a){"use strict";a("3846");var n=a("cb7c"),i=a("0bfb"),s=a("9e1e"),l="toString",o=/./[l],r=function(t){a("2aba")(RegExp.prototype,l,t,!0)};a("79e5")((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?r((function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?i.call(t):void 0)})):o.name!=l&&r((function(){return o.call(this)}))},"6da7":function(t,e,a){"use strict";a("6c7b");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"alg-channel-list",attrs:{id:"list-tab",role:"tablist"}},t._l(new Array(t.maxChannels).fill(0).map((function(t,e){return e+1})),(function(n){return e("div",{key:n,staticClass:"text-center",on:{click:function(e){return t.channelClicked(n)}}},[e("img",{directives:[{name:"show",rawName:"v-show",value:t.channelConfigured[n-1],expression:"channelConfigured[item-1]"}],class:"alg-channel-icon "+(n===t.selectedCno?"alg-channel-icon-selected ":" ")+(t.channelNames[n-1]?" ":"alg-channel-icon-invalid "),attrs:{src:a("5289"),alt:"通道"+{item:n}}}),e("img",{directives:[{name:"show",rawName:"v-show",value:!t.channelConfigured[n-1],expression:"!channelConfigured[item-1]"}],class:"alg-channel-icon "+(n===t.selectedCno?"alg-channel-icon-selected ":" ")+(t.channelNames[n-1]?" ":"alg-channel-icon-invalid "),attrs:{src:a("cc1e"),alt:"通道"+{item:n}}}),e("div",{staticClass:"text-center"},[e("IconFont",{class:t.channelNames[n-1]?t.channelStatusChanged[n-1]?"red-dot":"green-dot":"gray-dot",attrs:{iconName:"icon-dot"}}),t._v("\n      "+t._s("".concat(n," ")+(t.channelNames[n-1]?t.channelNames[n-1]:"(未添加)"))+"\n    ")],1)])})),0)},i=[],s=(a("c5f6"),a("f121")),l={name:"ChannelSelectionGrid",components:{},data:function(){return{maxChannels:s["a"].maxChannels}},props:{channelConfigured:{type:Array,required:!0},channelStatusChanged:{type:Array,required:!0},channelNames:{type:Array,required:!0},selectedCno:{type:Number,required:!0}},model:{prop:"selectedCno",event:"input"},methods:{channelClicked:function(t){this.channelNames[t-1]&&t!==this.selectedCno&&this.$emit("input",t)}},watch:{selectedCno:function(){}},mounted:function(){}},o=l,r=(a("8a3d"),a("2877")),c=Object(r["a"])(o,n,i,!1,null,null,null);e["a"]=c.exports},"8a3d":function(t,e,a){"use strict";a("6516")},9289:function(t,e,a){"use strict";a("3813")},a63d:function(t,e,a){"use strict";a("0f05")},b84e:function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid"},[t.showTitle?e("div",{staticClass:"row w-100 ml-1 py-2 border-bottom"},[e("label",{staticClass:"mt-1 field-label"},[t._v("当前算法：")]),e("span",{staticClass:"mt-1 mr-4"},[t._v(t._s(t.algDisplayName)+"识别")]),e("label",{staticClass:"mt-1 field-label",attrs:{for:"id-channel-alg-config"}},[t._v("配置")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.status.configured,expression:"status.configured"}],staticClass:"ml-1",attrs:{type:"radio",id:"id-channel-alg-config",name:"channelAlgConfig"},domProps:{value:!0,checked:t._q(t.status.configured,!0)},on:{change:function(e){return t.$set(t.status,"configured",!0)}}}),e("label",{staticClass:"ml-2 mt-1 field-label",attrs:{for:"id-channel-alg-unconfig"}},[t._v("不配置")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.status.configured,expression:"status.configured"}],staticClass:"ml-2",attrs:{type:"radio",id:"id-channel-alg-unconfig",name:"channelAlgConfig"},domProps:{value:!1,checked:t._q(t.status.configured,!1)},on:{change:function(e){return t.$set(t.status,"configured",!1)}}}),e("button",{staticClass:"btn btn-sm btn-primary ml-2 btn-sm btn-iview-size",attrs:{type:"button"},on:{click:t.restoreDefault}},[t._v("恢复默认参数")])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.status.configured,expression:"status.configured"}],staticClass:"row mt-2 pb-2 border-bottom"},[e("span",{staticClass:"field-label pl-3"},[t._v("检测参数：")]),e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[t._m(0),e("div",{staticClass:"col"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.status.analyze_interval,expression:"status.analyze_interval",modifiers:{number:!0}}],staticClass:"ml-2",attrs:{type:"number",step:"500"},domProps:{value:t.status.analyze_interval},on:{input:function(e){e.target.composing||t.$set(t.status,"analyze_interval",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("span",{},[t._v("(500毫秒为单位，最小值1000毫秒)")])])]),e("div",{staticClass:"row mt-1"},[t._m(1),e("div",{staticClass:"col"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.status.alert_interval,expression:"status.alert_interval",modifiers:{number:!0}}],staticClass:"ml-2",attrs:{type:"number",step:"1"},domProps:{value:t.status.alert_interval},on:{input:function(e){e.target.composing||t.$set(t.status,"alert_interval",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),e("div",{staticClass:"row mt-1"},[t._m(2),e("div",{staticClass:"col"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.status.alert_threshold,expression:"status.alert_threshold",modifiers:{number:!0}}],staticClass:"ml-2",attrs:{type:"number",step:"0.05"},domProps:{value:t.status.alert_threshold},on:{input:function(e){e.target.composing||t.$set(t.status,"alert_threshold",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("span",{},[t._v("(值越大检查准确率越高)")])])])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.status.configured,expression:"status.configured"}],staticClass:"row mt-2 pb-2 border-bottom"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row mb-1"},[e("span",{staticClass:"field-label pl-3 pt-1"},[t._v("布控时间：")]),e("a",{directives:[{name:"show",rawName:"v-show",value:t.showTimeToggle,expression:"showTimeToggle"}],staticClass:"btn-sm btn-primary",attrs:{"data-toggle":"collapse",href:"#dateTimeSetting",role:"button","aria-expanded":"false","aria-controls":"dateTimeSetting"}},[t._v(t._s(t.dateTimeSettingShown?"收起":"展开"))])]),e("div",{staticClass:"row"},[e("div",{class:"col collapse ".concat(t.showTimeToggle?"":"show"),attrs:{id:"dateTimeSetting"}},[e("div",{staticClass:"border w-100",staticStyle:{height:"400px"}},[e("WeekDatetimePicker",{model:{value:t.status.alert_times,callback:function(e){t.$set(t.status,"alert_times",e)},expression:"status.alert_times"}})],1)])])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.status.configured&&t.showRoi,expression:"status.configured && showRoi"}],staticClass:"row mt-2 border-bottom"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("span",{staticClass:"field-label py-2 pl-3"},[t._v("绘制监控区域(ROI)：")]),e("a",{staticClass:"mr-2",attrs:{title:t.roiDrawing?"完成":"新建多边形",href:"javascript:void(0);"},on:{click:function(e){t.roiDrawing=!t.roiDrawing}}},[e("IconFont",{class:t.roiDrawing?"duobianxing-selected":"duobianxing-unselected",attrs:{iconName:"icon-duobianxingxuanze"}})],1),e("a",{staticClass:"mr-2",attrs:{title:"清除选区(监控整个画面)",href:"javascript:void(0);"},on:{click:function(e){t.status.roi_region=null,t.roiDrawing=!1}}},[e("IconFont",{staticClass:"shanchu-button",attrs:{iconName:"icon-shanchu"}})],1)]),e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col"},[e("RoiDrawPanel",{attrs:{isDrawing:t.roiDrawing,imgSrc:t.channelImage,panelShown:t.modalShown&&t.status.configured},model:{value:t.status.roi_region,callback:function(e){t.$set(t.status,"roi_region",e)},expression:"status.roi_region"}})],1)])])])])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-3 text-right"},[e("span",{},[t._v("分析间隔(毫秒)")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-3 text-right"},[e("span",{},[t._v("报警间隔(秒)")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-3 text-right"},[e("span",{},[t._v("报警阈值(0-1)")])])}],s=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),l=a("f62b"),o=a("4865"),r=a("d940");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={name:"ChannelAlgConfigPanel",components:{WeekDatetimePicker:l["a"],RoiDrawPanel:o["a"],IconFont:r["a"]},data:function(){return{dateTimeSettingShown:!1,status:{},algDisplayNamePrev:"",roiDrawing:!1}},props:{defaultParameters:{type:Object,required:!1,default:function(){return{}}},showTimeToggle:{type:Boolean,required:!1,default:!0},showTitle:{type:Boolean,required:!1,default:!0},showRoi:{type:Boolean,required:!1,default:!0},channelImage:{type:String,required:!1,default:""},modalShown:{type:Boolean,required:!1,default:!1},algDisplayName:{type:String,required:!0},modelValue:{type:Object,required:!0}},model:{prop:"modelValue",event:"input"},computed:{},methods:{restoreDefault:function(){var t=u({},this.status);for(var e in this.defaultParameters)t[e]=this.defaultParameters[e];this.status=t}},watch:{modelValue:function(t){this.algDisplayNamePrev===this.algDisplayName&&JSON.stringify(this.status)===JSON.stringify(t)||(this.algDisplayNamePrev=this.algDisplayName,this.status=this.modelValue)},status:{handler:function(){console.log("this.status changed",this.status),this.$emit("input",this.status)},deep:!0},algDisplayName:function(){this.roiDrawing=!1}},mounted:function(){this.status=u({},this.modelValue)}},m=d,h=(a("1ac9"),a("2877")),g=Object(h["a"])(m,n,i,!1,null,null,null);e["a"]=g.exports},ba58:function(t,e,a){t.exports=a.p+"img/algo-bg.91d4f6d2.png"},cc1e:function(t,e,a){t.exports=a.p+"img/channel-not-configured.4da3f0ed.png"}}]);