(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9d2fa7b2"],{"00fd":function(e,t,i){var n=i("9e69"),r=Object.prototype,a=r.hasOwnProperty,s=r.toString,o=n?n.toStringTag:void 0;function c(e){var t=a.call(e,o),i=e[o];try{e[o]=void 0;var n=!0}catch(c){}var r=s.call(e);return n&&(t?e[o]=i:delete e[o]),r}e.exports=c},1310:function(e,t){function i(e){return null!=e&&"object"==typeof e}e.exports=i},"1a8c":function(e,t){function i(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=i},"208d":function(e,t,i){"use strict";i("6b6d")},"29f3":function(e,t){var i=Object.prototype,n=i.toString;function r(e){return n.call(e)}e.exports=r},"2b3e":function(e,t,i){var n=i("585a"),r="object"==typeof self&&self&&self.Object===Object&&self,a=n||r||Function("return this")();e.exports=a},"36bd":function(e,t,i){"use strict";var n=i("4bf8"),r=i("77f1"),a=i("9def");e.exports=function(e){var t=n(this),i=a(t.length),s=arguments.length,o=r(s>1?arguments[1]:void 0,i),c=s>2?arguments[2]:void 0,l=void 0===c?i:r(c,i);while(l>o)t[o++]=e;return t}},3729:function(e,t,i){var n=i("9e69"),r=i("00fd"),a=i("29f3"),s="[object Null]",o="[object Undefined]",c=n?n.toStringTag:void 0;function l(e){return null==e?void 0===e?o:s:c&&c in Object(e)?r(e):a(e)}e.exports=l},"408c":function(e,t,i){var n=i("2b3e"),r=function(){return n.Date.now()};e.exports=r},"42fc":function(e,t,i){"use strict";i("e27e")},"4cef":function(e,t){var i=/\s/;function n(e){var t=e.length;while(t--&&i.test(e.charAt(t)));return t}e.exports=n},"585a":function(e,t,i){(function(t){var i="object"==typeof t&&t&&t.Object===Object&&t;e.exports=i}).call(this,i("c8ba"))},"6b6d":function(e,t,i){},"6c7b":function(e,t,i){var n=i("5ca1");n(n.P,"Array",{fill:i("36bd")}),i("9c6c")("fill")},"8d74":function(e,t,i){var n=i("4cef"),r=/^\s+/;function a(e){return e?e.slice(0,n(e)+1).replace(r,""):e}e.exports=a},"9e69":function(e,t,i){var n=i("2b3e"),r=n.Symbol;e.exports=r},b047:function(e,t,i){var n=i("1a8c"),r=i("408c"),a=i("b4b0"),s="Expected a function",o=Math.max,c=Math.min;function l(e,t,i){var l,d,h,u,_,f,p=0,g=!1,m=!1,v=!0;if("function"!=typeof e)throw new TypeError(s);function b(t){var i=l,n=d;return l=d=void 0,p=t,u=e.apply(n,i),u}function w(e){return p=e,_=setTimeout(x,t),g?b(e):u}function y(e){var i=e-f,n=e-p,r=t-i;return m?c(r,h-n):r}function z(e){var i=e-f,n=e-p;return void 0===f||i>=t||i<0||m&&n>=h}function x(){var e=r();if(z(e))return O(e);_=setTimeout(x,y(e))}function O(e){return _=void 0,v&&l?b(e):(l=d=void 0,u)}function C(){void 0!==_&&clearTimeout(_),p=0,l=f=d=_=void 0}function T(){return void 0===_?u:O(r())}function j(){var e=r(),i=z(e);if(l=arguments,d=this,f=e,i){if(void 0===_)return w(f);if(m)return clearTimeout(_),_=setTimeout(x,t),b(f)}return void 0===_&&(_=setTimeout(x,t)),u}return t=a(t)||0,n(i)&&(g=!!i.leading,m="maxWait"in i,h=m?o(a(i.maxWait)||0,t):h,v="trailing"in i?!!i.trailing:v),j.cancel=C,j.flush=T,j}e.exports=l},b4b0:function(e,t,i){var n=i("8d74"),r=i("1a8c"),a=i("ffd6"),s=NaN,o=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;function h(e){if("number"==typeof e)return e;if(a(e))return s;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var i=c.test(e);return i||l.test(e)?d(e.slice(2),i?2:8):o.test(e)?s:+e}e.exports=h},b809:function(e,t,i){},d8f3:function(e,t,i){"use strict";i("b809")},e27e:function(e,t,i){},ed02:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container-fluid"},[t("div",{staticClass:"row dash-filters"}),t("div",{staticClass:"row dash-outline"},[t("div",{staticClass:"col-6 px-2"},[t("div",{staticClass:"card w-100"},[t("div",{staticClass:"card-body py-0 px-0"},[t("div",{staticClass:"w-100 dash-outline-algorithms"},[t("div",{staticClass:"py-1 px-2 field-label"},[e._v("算法")]),t("div",{staticClass:"py-1 px-2"},[e._v("已配置 "+e._s(e.configuredAlgorithms)+" / 总数 "+e._s(e.countAlgorithms))])])])])]),t("div",{staticClass:"col-6 px-2"},[t("div",{staticClass:"card w-100"},[t("div",{staticClass:"card-body py-0 px-0"},[t("div",{staticClass:"w-100 dash-outline-channels"},[t("div",{staticClass:"py-1 px-2 field-label"},[e._v("视频通道")]),t("div",{staticClass:"py-1 px-2"},[e._v("已配置 "+e._s(e.configuredChannels))])])])])])]),t("div",{staticClass:"row my-2"},[t("div",{staticClass:"col px-2"},[t("div",{staticClass:"row mx-3 my-0"},[t("DateTimeRangePicker",{model:{value:e.dateTimeRange,callback:function(t){e.dateTimeRange=t},expression:"dateTimeRange"}})],1)])]),t("div",{staticClass:"row dash-lineplot"},[t("div",{staticClass:"col"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col px-2 channel-stats"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header py-1 px-2"},[t("div",{staticClass:"row m-0 p-0"},[t("span",{staticClass:"mr-4"},[e._v("告警时段统计")]),t("SimpleSelect",{attrs:{itemList:["按小时","按天"],label:""},model:{value:e.channelStatsTimeUnit,callback:function(t){e.channelStatsTimeUnit=t},expression:"channelStatsTimeUnit"}})],1)]),t("div",{staticClass:"card-body py-1 px-2 w-100"},[t("AlertChannelStatsChart",{attrs:{timeUnit:e.channelStatsTimeUnit,dateTimeFilter:e.dateTimeFilter}})],1)])])])])])])},r=[],a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"channel-stats-chart-box"},[t("ECharts",{staticClass:"channel-stats-chart",attrs:{options:e.option}})],1)},s=[],o=(i("8e6e"),i("456d"),i("6c7b"),i("ac6a"),i("5df3"),i("4f7f"),i("75fc")),c=(i("55dd"),i("bd86")),l=(i("c5f6"),i("fa7d")),d=i("0be2"),h=i("5a0c"),u=i.n(h),_=function(){var e=this,t=e._self._c;return t("div",{staticClass:"echarts"})},f=[],p=i("3eba"),g=i.n(p),m=i("b047"),v=i.n(m);let b=null;function w(e){return b||(b=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),b(e)}let y=null;function z(e){y||(y=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),y(e)}function x(e){var t=document.createElement("style");return t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function O(e,t={}){let i=document.createElement(e);return Object.keys(t).forEach(e=>{i[e]=t[e]}),i}function C(e,t,i){let n=window.getComputedStyle(e,i||null)||{display:"none"};return n[t]}function T(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};let t=e;while(t!==document){if("none"===C(t,"display"))return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var j='.resize-triggers{visibility:hidden;opacity:0}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}';let A=0,S=null;function D(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=F.bind(e));let i=e.__resize_listeners__;if(!i)if(e.__resize_listeners__=[],window.ResizeObserver){let{offsetWidth:t,offsetHeight:i}=e,n=new ResizeObserver(()=>{(e.__resize_observer_triggered__||(e.__resize_observer_triggered__=!0,e.offsetWidth!==t||e.offsetHeight!==i))&&H(e)}),{detached:r,rendered:a}=T(e);e.__resize_observer_triggered__=!1===r&&!1===a,e.__resize_observer__=n,n.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){H(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(A||(S=x(j)),P(e),e.__resize_rendered__=T(e).rendered,window.MutationObserver){let t=new MutationObserver(e.__resize_mutation_handler__);t.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=t}e.__resize_listeners__.push(t),A++}function E(e,t){if(e.detachEvent&&e.removeEventListener)return e.detachEvent("onresize",e.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);let i=e.__resize_listeners__;i&&(i.splice(i.indexOf(t),1),i.length||(e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",L),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null),!--A&&S&&S.parentNode.removeChild(S))}function M(e){let{width:t,height:i}=e.__resize_last__,{offsetWidth:n,offsetHeight:r}=e;return n!==t||r!==i?{width:n,height:r}:null}function F(){let{rendered:e,detached:t}=T(this);e!==this.__resize_rendered__&&(!t&&this.__resize_triggers__&&(R(this),this.addEventListener("scroll",L,!0)),this.__resize_rendered__=e,H(this))}function L(){R(this),this.__resize_raf__&&z(this.__resize_raf__),this.__resize_raf__=w(()=>{let e=M(this);e&&(this.__resize_last__=e,H(this))})}function H(e){e&&e.__resize_listeners__&&e.__resize_listeners__.forEach(t=>{t.call(e)})}function P(e){let t=C(e,"position");t&&"static"!==t||(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};let i=O("div",{className:"resize-triggers"}),n=O("div",{className:"resize-expand-trigger"}),r=O("div"),a=O("div",{className:"resize-contract-trigger"});n.appendChild(r),i.appendChild(n),i.appendChild(a),e.appendChild(i),e.__resize_triggers__={triggers:i,expand:n,expandChild:r,contract:a},R(e),e.addEventListener("scroll",L,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function R(e){let{expand:t,expandChild:i,contract:n}=e.__resize_triggers__,{scrollWidth:r,scrollHeight:a}=n,{offsetWidth:s,offsetHeight:o,scrollWidth:c,scrollHeight:l}=t;n.scrollLeft=r,n.scrollTop=a,i.style.width=s+1+"px",i.style.height=o+1+"px",t.scrollLeft=c,t.scrollTop=l}const U=["legendselectchanged","legendselected","legendunselected","legendscroll","datazoom","datarangeselected","timelinechanged","timelineplaychanged","restore","dataviewchanged","magictypechanged","geoselectchanged","geoselected","geounselected","pieselectchanged","pieselected","pieunselected","mapselectchanged","mapselected","mapunselected","axisareaselected","focusnodeadjacency","unfocusnodeadjacency","brush","brushselected","rendered","finished","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],k=["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],W=["theme","initOptions","autoresize"],$=["manualUpdate","watchShallow"];var G={props:{options:Object,theme:[String,Object],initOptions:Object,group:String,autoresize:Boolean,watchShallow:Boolean,manualUpdate:Boolean},data(){return{lastArea:0}},watch:{group(e){this.chart.group=e}},methods:{mergeOptions(e,t,i){this.manualUpdate&&(this.manualOptions=e),this.chart?this.delegateMethod("setOption",e,t,i):this.init(e)},appendData(e){this.delegateMethod("appendData",e)},resize(e){this.delegateMethod("resize",e)},dispatchAction(e){this.delegateMethod("dispatchAction",e)},convertToPixel(e,t){return this.delegateMethod("convertToPixel",e,t)},convertFromPixel(e,t){return this.delegateMethod("convertFromPixel",e,t)},containPixel(e,t){return this.delegateMethod("containPixel",e,t)},showLoading(e,t){this.delegateMethod("showLoading",e,t)},hideLoading(){this.delegateMethod("hideLoading")},getDataURL(e){return this.delegateMethod("getDataURL",e)},getConnectedDataURL(e){return this.delegateMethod("getConnectedDataURL",e)},clear(){this.delegateMethod("clear")},dispose(){this.delegateMethod("dispose")},delegateMethod(e,...t){return this.chart||this.init(),this.chart[e](...t)},delegateGet(e){return this.chart||this.init(),this.chart[e]()},getArea(){return this.$el.offsetWidth*this.$el.offsetHeight},init(e){if(this.chart)return;let t=g.a.init(this.$el,this.theme,this.initOptions);this.group&&(t.group=this.group),t.setOption(e||this.manualOptions||this.options||{},!0),U.forEach(e=>{t.on(e,t=>{this.$emit(e,t)})}),k.forEach(e=>{t.getZr().on(e,t=>{this.$emit("zr:"+e,t)})}),this.autoresize&&(this.lastArea=this.getArea(),this.__resizeHandler=v()(()=>{0===this.lastArea?(this.mergeOptions({},!0),this.resize(),this.mergeOptions(this.options||this.manualOptions||{},!0)):this.resize(),this.lastArea=this.getArea()},100,{leading:!0}),D(this.$el,this.__resizeHandler)),Object.defineProperties(this,{width:{configurable:!0,get:()=>this.delegateGet("getWidth")},height:{configurable:!0,get:()=>this.delegateGet("getHeight")},isDisposed:{configurable:!0,get:()=>!!this.delegateGet("isDisposed")},computedOptions:{configurable:!0,get:()=>this.delegateGet("getOption")}}),this.chart=t},initOptionsWatcher(){this.__unwatchOptions&&(this.__unwatchOptions(),this.__unwatchOptions=null),this.manualUpdate||(this.__unwatchOptions=this.$watch("options",(e,t)=>{!this.chart&&e?this.init():this.chart.setOption(e,e!==t)},{deep:!this.watchShallow}))},destroy(){this.autoresize&&E(this.$el,this.__resizeHandler),this.dispose(),this.chart=null},refresh(){this.chart&&(this.destroy(),this.init())}},created(){this.initOptionsWatcher(),W.forEach(e=>{this.$watch(e,()=>{this.refresh()},{deep:!0})}),$.forEach(e=>{this.$watch(e,()=>{this.initOptionsWatcher(),this.refresh()})})},mounted(){this.options&&this.init()},activated(){this.autoresize&&this.chart&&this.chart.resize()},destroyed(){this.chart&&this.destroy()},connect(e){"string"!==typeof e&&(e=e.map(e=>e.chart)),g.a.connect(e)},disconnect(e){g.a.disConnect(e)},registerMap(e,t,i){g.a.registerMap(e,t,i)},registerTheme(e,t){g.a.registerTheme(e,t)},graphic:g.a.graphic},N=G,Y=(i("42fc"),i("2877")),q=Object(Y["a"])(N,_,f,!1,null,null,null),Z=q.exports;i("94b1"),i("ef97");function I(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function B(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?I(Object(i),!0).forEach((function(t){Object(c["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):I(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var J={name:"AlertChannelStatsChart",components:{ECharts:Z},provide:{},props:{timeUnit:{type:Number,required:!1,default:0},dateTimeFilter:{type:Object,required:!1,default:null}},data:function(){return{option:{title:{show:!1,text:"Temperature Change in the Coming Week"},toolbox:{show:!0,feature:{magicType:{type:["line","bar"]}},right:40},tooltip:{show:!0,trigger:"axis",formatter:"{b} : {c} ({d}%)"},legend:{show:!0},grid:{left:70,right:50,top:30,bottom:40},dataZoom:[{show:!0,type:"inside",start:50,end:100},{show:!0,top:"90%",bottom:"2%",start:50,end:100}],xAxis:{type:"category",boundaryGap:!1,data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{name:"Highest",type:"line",data:[10,11,13,11,12,12,9]},{name:"Lowest",type:"line",data:[1,-2,2,5,3,2,0]}]}}},watch:{timeUnit:function(){this.loadData()},dateTimeFilter:function(){this.loadData()}},methods:{loadData:function(){var e=this,t=0===this.timeUnit?"hour":"day",i="alert/alerts2/groupby/",n={by:"channel__cno,".concat(t),count:"id"};this.dateTimeFilter&&(n=B(B({},n),this.dateTimeFilter)),d["a"].apiAjaxGet(i,n,(function(i){if(0===i.code&&i.data){var n,r=Object(o["a"])(new Set(i.data.map((function(e){return e[t]})))).sort(),a=Object(o["a"])(new Set(i.data.map((function(e){return e.channel__cno})))).sort(),s={};for(var c in a.forEach((function(e){s[e]=new Array(r.length).fill(0)})),i.data.forEach((function(e){var i=r.indexOf(e[t]);i>=0&&(s[e.channel__cno][i]=e.count_id)})),r=r.map((function(t){var i=new Date(t);return 0===e.timeUnit?u()(i).format("YYYY-MM-DDTHH:00"):u()(i).format("YYYY-MM-DD")})),n=r.length<=10?0:100*(r.length-10)/r.length,e.option.dataZoom[0].start=n,e.option.dataZoom[1].start=n,e.option.dataZoom[0].end=100,e.option.dataZoom[1].end=100,e.option.xAxis.data=r,e.option.series=[],s)e.option.series.push({name:"通道编号-".concat(c),type:"line",data:s[c]})}}),l["a"].defaultApiErrorHandler(i,""))}},mounted:function(){this.loadData()}},K=J,Q=(i("208d"),Object(Y["a"])(K,a,s,!1,null,"3ce9cb64",null)),V=Q.exports,X=i("4d92"),ee=i("8cba"),te=i("1157"),ie=i.n(te),ne={name:"ModuleDashboard",components:{AlertChannelStatsChart:V,SimpleSelect:X["a"],DateTimeRangePicker:ee["a"]},data:function(){return{bigChartDlgId:l["a"].randomId("modalId"),channelStatsTimeUnit:0,dateTimeRange:ee["a"].getDefaultRange(),dateTimeFilter:ee["a"].rangeToFilter(ee["a"].getDefaultRange()),countAlgorithms:0,configuredAlgorithms:0,configuredChannels:0,bigChartType0:"",bigChartType:""}},computed:{},methods:{getOutlines:function(){var e=this,t="algorithm/algorithms/groupby/?by=id&count=id";d["a"].apiAjaxGet(t,{},(function(t){0===t.code&&t.data&&(e.countAlgorithms=t.data.length)}),l["a"].defaultApiErrorHandler(t,"")),t="channel/channelalgorithms/groupby/?by=algorithm&count=id",d["a"].apiAjaxGet(t,{},(function(t){0===t.code&&t.data&&(e.configuredAlgorithms=t.data.length)}),l["a"].defaultApiErrorHandler(t,"")),t="channel/channelalgorithms/groupby/?by=channel&count=id",d["a"].apiAjaxGet(t,{},(function(t){0===t.code&&t.data&&(e.configuredChannels=t.data.length)}),l["a"].defaultApiErrorHandler(t,""))}},watch:{dateTimeRange:function(){this.dateTimeRange&&(this.dateTimeFilter=ee["a"].rangeToFilter(this.dateTimeRange))}},mounted:function(){var e=this;this.getOutlines(),ie()("#".concat(this.bigChartDlgId)).on("shown.bs.modal",(function(){e.bigChartType=e.bigChartType0}))}},re=ne,ae=(i("d8f3"),Object(Y["a"])(re,n,r,!1,null,null,null));t["default"]=ae.exports},ffd6:function(e,t,i){var n=i("3729"),r=i("1310"),a="[object Symbol]";function s(e){return"symbol"==typeof e||r(e)&&n(e)==a}e.exports=s}}]);