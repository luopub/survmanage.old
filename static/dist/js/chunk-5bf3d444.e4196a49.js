(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bf3d444"],{"00fd":function(t,e,i){var a=i("9e69"),r=Object.prototype,n=r.hasOwnProperty,s=r.toString,o=a?a.toStringTag:void 0;function c(t){var e=n.call(t,o),i=t[o];try{t[o]=void 0;var a=!0}catch(c){}var r=s.call(t);return a&&(e?t[o]=i:delete t[o]),r}t.exports=c},"0ced":function(t,e,i){},"0dca":function(t,e,i){},1310:function(t,e){function i(t){return null!=t&&"object"==typeof t}t.exports=i},"1a8c":function(t,e){function i(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=i},2706:function(t,e,i){"use strict";i("e790")},"29f3":function(t,e){var i=Object.prototype,a=i.toString;function r(t){return a.call(t)}t.exports=r},"2b3e":function(t,e,i){var a=i("585a"),r="object"==typeof self&&self&&self.Object===Object&&self,n=a||r||Function("return this")();t.exports=n},"36bd":function(t,e,i){"use strict";var a=i("4bf8"),r=i("77f1"),n=i("9def");t.exports=function(t){var e=a(this),i=n(e.length),s=arguments.length,o=r(s>1?arguments[1]:void 0,i),c=s>2?arguments[2]:void 0,l=void 0===c?i:r(c,i);while(l>o)e[o++]=t;return e}},3729:function(t,e,i){var a=i("9e69"),r=i("00fd"),n=i("29f3"),s="[object Null]",o="[object Undefined]",c=a?a.toStringTag:void 0;function l(t){return null==t?void 0===t?o:s:c&&c in Object(t)?r(t):n(t)}t.exports=l},"408c":function(t,e,i){var a=i("2b3e"),r=function(){return a.Date.now()};t.exports=r},4204:function(t,e,i){"use strict";i("0ced")},"42fc":function(t,e,i){"use strict";i("e27e")},"4cef":function(t,e){var i=/\s/;function a(t){var e=t.length;while(e--&&i.test(t.charAt(e)));return e}t.exports=a},"51d4":function(t,e,i){"use strict";i("b844")},"585a":function(t,e,i){(function(e){var i="object"==typeof e&&e&&e.Object===Object&&e;t.exports=i}).call(this,i("c8ba"))},"5bed":function(t,e,i){},"6c7b":function(t,e,i){var a=i("5ca1");a(a.P,"Array",{fill:i("36bd")}),i("9c6c")("fill")},"80ab":function(t,e,i){},8117:function(t,e,i){"use strict";i("5bed")},8360:function(t,e,i){},"8d74":function(t,e,i){var a=i("4cef"),r=/^\s+/;function n(t){return t?t.slice(0,a(t)+1).replace(r,""):t}t.exports=n},"9e69":function(t,e,i){var a=i("2b3e"),r=a.Symbol;t.exports=r},b047:function(t,e,i){var a=i("1a8c"),r=i("408c"),n=i("b4b0"),s="Expected a function",o=Math.max,c=Math.min;function l(t,e,i){var l,d,h,u,p,f,g=0,_=!1,m=!1,b=!0;if("function"!=typeof t)throw new TypeError(s);function v(e){var i=l,a=d;return l=d=void 0,g=e,u=t.apply(a,i),u}function y(t){return g=t,p=setTimeout(O,e),_?v(t):u}function w(t){var i=t-f,a=t-g,r=e-i;return m?c(r,h-a):r}function C(t){var i=t-f,a=t-g;return void 0===f||i>=e||i<0||m&&a>=h}function O(){var t=r();if(C(t))return x(t);p=setTimeout(O,w(t))}function x(t){return p=void 0,b&&l?v(t):(l=d=void 0,u)}function T(){void 0!==p&&clearTimeout(p),g=0,l=f=d=p=void 0}function j(){return void 0===p?u:x(r())}function z(){var t=r(),i=C(t);if(l=arguments,d=this,f=t,i){if(void 0===p)return y(f);if(m)return clearTimeout(p),p=setTimeout(O,e),v(f)}return void 0===p&&(p=setTimeout(O,e)),u}return e=n(e)||0,a(i)&&(_=!!i.leading,m="maxWait"in i,h=m?o(n(i.maxWait)||0,e):h,b="trailing"in i?!!i.trailing:b),z.cancel=T,z.flush=j,z}t.exports=l},b4b0:function(t,e,i){var a=i("8d74"),r=i("1a8c"),n=i("ffd6"),s=NaN,o=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;function h(t){if("number"==typeof t)return t;if(n(t))return s;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=a(t);var i=c.test(t);return i||l.test(t)?d(t.slice(2),i?2:8):o.test(t)?s:+t}t.exports=h},b844:function(t,e,i){},babf:function(t,e,i){"use strict";i("0dca")},d593:function(t,e,i){"use strict";i("8360")},e27e:function(t,e,i){},e790:function(t,e,i){},ecf3:function(t,e,i){"use strict";i("80ab")},ed02:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row dash-filters"}),e("div",{staticClass:"row dash-outline"},[e("div",{staticClass:"col-6 px-2"},[e("div",{staticClass:"card w-100"},[e("div",{staticClass:"card-body py-0 px-0"},[e("div",{staticClass:"w-100 dash-outline-algorithms"},[e("div",{staticClass:"py-1 px-2 field-label"},[t._v("算法")]),e("div",{staticClass:"py-1 px-2"},[t._v("已配置 "+t._s(t.configuredAlgorithms)+" / 总数 "+t._s(t.countAlgorithms))])])])])]),e("div",{staticClass:"col-6 px-2"},[e("div",{staticClass:"card w-100"},[e("div",{staticClass:"card-body py-0 px-0"},[e("div",{staticClass:"w-100 dash-outline-channels"},[e("div",{staticClass:"py-1 px-2 field-label"},[t._v("视频通道")]),e("div",{staticClass:"py-1 px-2"},[t._v("已配置 "+t._s(t.configuredChannels))])])])])])]),e("div",{staticClass:"row my-2"},[e("div",{staticClass:"col px-2"},[e("div",{staticClass:"row mx-3 my-0"},[e("DateTimeRangePicker",{model:{value:t.dateTimeRange,callback:function(e){t.dateTimeRange=e},expression:"dateTimeRange"}})],1)])]),e("div",{staticClass:"row dash-lineplot"},[e("div",{staticClass:"col"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col px-2 channel-stats"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header py-1 px-2"},[e("div",{staticClass:"row m-0 p-0"},[e("span",{staticClass:"mr-4"},[t._v("告警时段统计")]),e("SimpleSelect",{attrs:{itemList:["按小时","按天"],label:""},model:{value:t.channelStatsTimeUnit,callback:function(e){t.channelStatsTimeUnit=e},expression:"channelStatsTimeUnit"}})],1)]),e("div",{staticClass:"card-body py-1 px-2 w-100"},[e("AlertChannelStatsChart",{attrs:{timeUnit:t.channelStatsTimeUnit,dateTimeFilter:t.dateTimeFilter}})],1)])])])])]),e("div",{staticClass:"row my-2"}),e("div",{staticClass:"row dash-stats"},[e("div",{staticClass:"col-lg-3 col-md-6 px-2 mb-2"},[e("div",{staticClass:"card w-100"},[e("div",{staticClass:"card-header py-1 px-2 dash-chart-title"},[t._v("\n          告警地点\n          "),e("button",{staticClass:"btn btn-sm btn-link p-0",staticStyle:{"font-size":"1.2em"},attrs:{"data-toggle":"modal","data-target":"#"+t.bigChartDlgId},on:{click:function(e){t.bigChartType0="告警地点"}}},[e("IconFont",{attrs:{iconName:"icon-fangda"}})],1)]),e("div",{staticClass:"card-body py-1 px-2 stats-cell"},[e("AlertSiteStatsChart",{attrs:{dateTimeFilter:t.dateTimeFilter}})],1)])]),e("div",{staticClass:"col-lg-3 col-md-6 px-2 mb-2"},[e("div",{staticClass:"card w-100"},[e("div",{staticClass:"card-header py-1 px-2 dash-chart-title"},[t._v("\n          告警类型\n          "),e("button",{staticClass:"btn btn-sm btn-link p-0",staticStyle:{"font-size":"1.2em"},attrs:{"data-toggle":"modal","data-target":"#"+t.bigChartDlgId},on:{click:function(e){t.bigChartType0="告警类型"}}},[e("IconFont",{attrs:{iconName:"icon-fangda"}})],1)]),e("div",{staticClass:"card-body py-1 px-2 stats-cell"},[e("AlertTypeStatsChart",{attrs:{dateTimeFilter:t.dateTimeFilter}})],1)])]),e("div",{staticClass:"col-lg-3 col-md-6 px-2 mb-2"},[e("div",{staticClass:"card w-100"},[e("div",{staticClass:"card-header py-1 px-2 dash-chart-title"},[t._v("\n          告警数量\n          "),e("button",{staticClass:"btn btn-sm btn-link p-0",staticStyle:{"font-size":"1.2em"},attrs:{"data-toggle":"modal","data-target":"#"+t.bigChartDlgId},on:{click:function(e){t.bigChartType0="告警数量"}}},[e("IconFont",{attrs:{iconName:"icon-fangda"}})],1)]),e("div",{staticClass:"card-body py-1 px-2 stats-cell"},[e("AlertTypeStatsChartBar",{attrs:{dateTimeFilter:t.dateTimeFilter}})],1)])]),e("div",{staticClass:"col-lg-3 col-md-6 px-2 mb-2"},[e("div",{staticClass:"card w-100"},[e("div",{staticClass:"card-header py-1 px-2 dash-chart-title"},[t._v("\n          磁盘占比\n          "),e("button",{staticClass:"btn btn-sm btn-link p-0",staticStyle:{"font-size":"1.2em"},attrs:{"data-toggle":"modal","data-target":"#"+t.bigChartDlgId},on:{click:function(e){t.bigChartType0="磁盘占比"}}},[e("IconFont",{attrs:{iconName:"icon-fangda"}})],1)]),e("div",{staticClass:"card-body py-1 px-2 stats-cell"},[e("DiskUsageChart")],1)])])]),e("AlertStatsBigChartDlg",{attrs:{dateTimeFilter:t.dateTimeFilter,modalId:t.bigChartDlgId,chartType:t.bigChartType}})],1)},r=[],n=function(){var t=this,e=t._self._c;return e("ECharts",{staticClass:"type-pie-chart",attrs:{options:t.option}})},s=[],o=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),c=i("fa7d"),l=i("0be2"),d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"echarts"})},h=[],u=i("3eba"),p=i.n(u),f=i("b047"),g=i.n(f);let _=null;function m(t){return _||(_=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),_(t)}let b=null;function v(t){b||(b=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),b(t)}function y(t){var e=document.createElement("style");return e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),(document.querySelector("head")||document.body).appendChild(e),e}function w(t,e={}){let i=document.createElement(t);return Object.keys(e).forEach(t=>{i[t]=e[t]}),i}function C(t,e,i){let a=window.getComputedStyle(t,i||null)||{display:"none"};return a[e]}function O(t){if(!document.documentElement.contains(t))return{detached:!0,rendered:!1};let e=t;while(e!==document){if("none"===C(e,"display"))return{detached:!1,rendered:!1};e=e.parentNode}return{detached:!1,rendered:!0}}var x='.resize-triggers{visibility:hidden;opacity:0}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}';let T=0,j=null;function z(t,e){t.__resize_mutation_handler__||(t.__resize_mutation_handler__=A.bind(t));let i=t.__resize_listeners__;if(!i)if(t.__resize_listeners__=[],window.ResizeObserver){let{offsetWidth:e,offsetHeight:i}=t,a=new ResizeObserver(()=>{(t.__resize_observer_triggered__||(t.__resize_observer_triggered__=!0,t.offsetWidth!==e||t.offsetHeight!==i))&&F(t)}),{detached:r,rendered:n}=O(t);t.__resize_observer_triggered__=!1===r&&!1===n,t.__resize_observer__=a,a.observe(t)}else if(t.attachEvent&&t.addEventListener)t.__resize_legacy_resize_handler__=function(){F(t)},t.attachEvent("onresize",t.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",t.__resize_mutation_handler__);else if(T||(j=y(x)),P(t),t.__resize_rendered__=O(t).rendered,window.MutationObserver){let e=new MutationObserver(t.__resize_mutation_handler__);e.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),t.__resize_mutation_observer__=e}t.__resize_listeners__.push(e),T++}function S(t,e){if(t.detachEvent&&t.removeEventListener)return t.detachEvent("onresize",t.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",t.__resize_mutation_handler__);let i=t.__resize_listeners__;i&&(i.splice(i.indexOf(e),1),i.length||(t.__resize_observer__?(t.__resize_observer__.unobserve(t),t.__resize_observer__.disconnect(),t.__resize_observer__=null):(t.__resize_mutation_observer__&&(t.__resize_mutation_observer__.disconnect(),t.__resize_mutation_observer__=null),t.removeEventListener("scroll",E),t.removeChild(t.__resize_triggers__.triggers),t.__resize_triggers__=null),t.__resize_listeners__=null),!--T&&j&&j.parentNode.removeChild(j))}function D(t){let{width:e,height:i}=t.__resize_last__,{offsetWidth:a,offsetHeight:r}=t;return a!==e||r!==i?{width:a,height:r}:null}function A(){let{rendered:t,detached:e}=O(this);t!==this.__resize_rendered__&&(!e&&this.__resize_triggers__&&(k(this),this.addEventListener("scroll",E,!0)),this.__resize_rendered__=t,F(this))}function E(){k(this),this.__resize_raf__&&v(this.__resize_raf__),this.__resize_raf__=m(()=>{let t=D(this);t&&(this.__resize_last__=t,F(this))})}function F(t){t&&t.__resize_listeners__&&t.__resize_listeners__.forEach(e=>{e.call(t)})}function P(t){let e=C(t,"position");e&&"static"!==e||(t.style.position="relative"),t.__resize_old_position__=e,t.__resize_last__={};let i=w("div",{className:"resize-triggers"}),a=w("div",{className:"resize-expand-trigger"}),r=w("div"),n=w("div",{className:"resize-contract-trigger"});a.appendChild(r),i.appendChild(a),i.appendChild(n),t.appendChild(i),t.__resize_triggers__={triggers:i,expand:a,expandChild:r,contract:n},k(t),t.addEventListener("scroll",E,!0),t.__resize_last__={width:t.offsetWidth,height:t.offsetHeight}}function k(t){let{expand:e,expandChild:i,contract:a}=t.__resize_triggers__,{scrollWidth:r,scrollHeight:n}=a,{offsetWidth:s,offsetHeight:o,scrollWidth:c,scrollHeight:l}=e;a.scrollLeft=r,a.scrollTop=n,i.style.width=s+1+"px",i.style.height=o+1+"px",e.scrollLeft=c,e.scrollTop=l}const M=["legendselectchanged","legendselected","legendunselected","legendscroll","datazoom","datarangeselected","timelinechanged","timelineplaychanged","restore","dataviewchanged","magictypechanged","geoselectchanged","geoselected","geounselected","pieselectchanged","pieselected","pieunselected","mapselectchanged","mapselected","mapunselected","axisareaselected","focusnodeadjacency","unfocusnodeadjacency","brush","brushselected","rendered","finished","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],U=["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],H=["theme","initOptions","autoresize"],L=["manualUpdate","watchShallow"];var R={props:{options:Object,theme:[String,Object],initOptions:Object,group:String,autoresize:Boolean,watchShallow:Boolean,manualUpdate:Boolean},data(){return{lastArea:0}},watch:{group(t){this.chart.group=t}},methods:{mergeOptions(t,e,i){this.manualUpdate&&(this.manualOptions=t),this.chart?this.delegateMethod("setOption",t,e,i):this.init(t)},appendData(t){this.delegateMethod("appendData",t)},resize(t){this.delegateMethod("resize",t)},dispatchAction(t){this.delegateMethod("dispatchAction",t)},convertToPixel(t,e){return this.delegateMethod("convertToPixel",t,e)},convertFromPixel(t,e){return this.delegateMethod("convertFromPixel",t,e)},containPixel(t,e){return this.delegateMethod("containPixel",t,e)},showLoading(t,e){this.delegateMethod("showLoading",t,e)},hideLoading(){this.delegateMethod("hideLoading")},getDataURL(t){return this.delegateMethod("getDataURL",t)},getConnectedDataURL(t){return this.delegateMethod("getConnectedDataURL",t)},clear(){this.delegateMethod("clear")},dispose(){this.delegateMethod("dispose")},delegateMethod(t,...e){return this.chart||this.init(),this.chart[t](...e)},delegateGet(t){return this.chart||this.init(),this.chart[t]()},getArea(){return this.$el.offsetWidth*this.$el.offsetHeight},init(t){if(this.chart)return;let e=p.a.init(this.$el,this.theme,this.initOptions);this.group&&(e.group=this.group),e.setOption(t||this.manualOptions||this.options||{},!0),M.forEach(t=>{e.on(t,e=>{this.$emit(t,e)})}),U.forEach(t=>{e.getZr().on(t,e=>{this.$emit("zr:"+t,e)})}),this.autoresize&&(this.lastArea=this.getArea(),this.__resizeHandler=g()(()=>{0===this.lastArea?(this.mergeOptions({},!0),this.resize(),this.mergeOptions(this.options||this.manualOptions||{},!0)):this.resize(),this.lastArea=this.getArea()},100,{leading:!0}),z(this.$el,this.__resizeHandler)),Object.defineProperties(this,{width:{configurable:!0,get:()=>this.delegateGet("getWidth")},height:{configurable:!0,get:()=>this.delegateGet("getHeight")},isDisposed:{configurable:!0,get:()=>!!this.delegateGet("isDisposed")},computedOptions:{configurable:!0,get:()=>this.delegateGet("getOption")}}),this.chart=e},initOptionsWatcher(){this.__unwatchOptions&&(this.__unwatchOptions(),this.__unwatchOptions=null),this.manualUpdate||(this.__unwatchOptions=this.$watch("options",(t,e)=>{!this.chart&&t?this.init():this.chart.setOption(t,t!==e)},{deep:!this.watchShallow}))},destroy(){this.autoresize&&S(this.$el,this.__resizeHandler),this.dispose(),this.chart=null},refresh(){this.chart&&(this.destroy(),this.init())}},created(){this.initOptionsWatcher(),H.forEach(t=>{this.$watch(t,()=>{this.refresh()},{deep:!0})}),L.forEach(t=>{this.$watch(t,()=>{this.initOptionsWatcher(),this.refresh()})})},mounted(){this.options&&this.init()},activated(){this.autoresize&&this.chart&&this.chart.resize()},destroyed(){this.chart&&this.destroy()},connect(t){"string"!==typeof t&&(t=t.map(t=>t.chart)),p.a.connect(t)},disconnect(t){p.a.disConnect(t)},registerMap(t,e,i){p.a.registerMap(t,e,i)},registerTheme(t,e){p.a.registerTheme(t,e)},graphic:p.a.graphic},W=R,I=(i("42fc"),i("2877")),B=Object(I["a"])(W,d,h,!1,null,null,null),G=B.exports;i("c037");function N(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function $(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?N(Object(i),!0).forEach((function(e){Object(o["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var q={name:"AlertTypeStatsChart",components:{ECharts:G},provide:{},props:{dateTimeFilter:{type:Object,required:!1,default:null}},data:function(){return{option:{title:{show:!1,text:"报警类型",left:"center"},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},legend:{show:!1,orient:"vertical",left:"left"},series:[{name:"报警类型",type:"pie",radius:["40%","65%"],center:["50%","50%"],data:[{value:335,name:"Direct"},{value:310,name:"Email"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}},methods:{loadData:function(){var t=this,e="alert/alerts2/groupby/",i={by:"algorithm__name_ch",count:"id"};this.dateTimeFilter&&(i=$($({},i),this.dateTimeFilter)),l["a"].apiAjaxGet(e,i,(function(e){if(0===e.code&&e.data){var i=e.data.map((function(t){return{value:t.count_id,name:t.algorithm__name_ch}}));t.option.series[0].data=i}}),c["a"].defaultApiErrorHandler(e,""))}},watch:{dateTimeFilter:function(){this.loadData()}},mounted:function(){this.loadData()}},Y=q,Z=(i("babf"),Object(I["a"])(Y,n,s,!1,null,"2b03c2ad",null)),X=Z.exports,J=function(){var t=this,e=t._self._c;return e("ECharts",{staticClass:"site-chart",attrs:{options:t.option}})},K=[];function Q(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function V(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(i),!0).forEach((function(e){Object(o["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Q(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var tt={name:"AlertSiteStatsChart",components:{ECharts:G},provide:{},props:{dateTimeFilter:{type:Object,required:!1,default:null}},data:function(){return{option:{title:{show:!1,text:"报警类型",left:"center"},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},legend:{show:!1,orient:"vertical",left:"left"},series:[{name:"报警类型",type:"pie",radius:"65%",center:["50%","50%"],data:[{value:335,name:"Direct"},{value:310,name:"Email"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}},methods:{loadData:function(){var t=this,e="alert/alerts2/groupby/",i={by:"channel__site",count:"id"};this.dateTimeFilter&&(i=V(V({},i),this.dateTimeFilter)),l["a"].apiAjaxGet(e,i,(function(e){if(0===e.code&&e.data){var i=e.data.map((function(t){return{value:t.count_id,name:t.channel__site}}));t.option.series[0].data=i}}),c["a"].defaultApiErrorHandler(e,""))}},watch:{dateTimeFilter:function(){this.loadData()}},mounted:function(){this.loadData()}},et=tt,it=(i("ecf3"),Object(I["a"])(et,J,K,!1,null,"794b493e",null)),at=it.exports,rt=function(){var t=this,e=t._self._c;return e("ECharts",{staticClass:"type-bar-chart",attrs:{options:t.option}})},nt=[];i("94b1");function st(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function ot(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?st(Object(i),!0).forEach((function(e){Object(o["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):st(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var ct={name:"AlertTypeStatsChartBar",components:{ECharts:G},props:{dateTimeFilter:{type:Object,required:!1,default:null}},data:function(){return{option:{title:{show:!1,text:"报警类型",left:"center"},tooltip:{show:!0,trigger:"axis",formatter:"{b} : {c}"},legend:{show:!1,orient:"vertical",left:"left"},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[120,200,150,80,70,110,130],type:"bar",emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}},methods:{loadData:function(){var t=this,e="alert/alerts2/groupby/",i={by:"algorithm__name_ch",count:"id"};this.dateTimeFilter&&(i=ot(ot({},i),this.dateTimeFilter)),l["a"].apiAjaxGet(e,i,(function(e){0===e.code&&e.data&&(t.option.series[0].data=e.data.map((function(t){return t.count_id})),t.option.xAxis.data=e.data.map((function(t){return t.algorithm__name_ch})))}),c["a"].defaultApiErrorHandler(e,""))}},watch:{dateTimeFilter:function(){this.loadData()}},mounted:function(){this.loadData()}},lt=ct,dt=(i("8117"),Object(I["a"])(lt,rt,nt,!1,null,"1daa780d",null)),ht=dt.exports,ut=function(){var t=this,e=t._self._c;return e("div",{staticClass:"channel-stats-chart-box"},[e("ECharts",{staticClass:"channel-stats-chart",attrs:{options:t.option}})],1)},pt=[],ft=(i("6c7b"),i("5df3"),i("4f7f"),i("75fc")),gt=(i("55dd"),i("c5f6"),i("5a0c")),_t=i.n(gt);i("ef97");function mt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function bt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(i),!0).forEach((function(e){Object(o["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):mt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var vt={name:"AlertChannelStatsChart",components:{ECharts:G},provide:{},props:{timeUnit:{type:Number,required:!1,default:0},dateTimeFilter:{type:Object,required:!1,default:null}},data:function(){return{option:{title:{show:!1,text:"Temperature Change in the Coming Week"},toolbox:{show:!0,feature:{magicType:{type:["line","bar"]}},right:40},tooltip:{show:!0,trigger:"axis"},legend:{show:!0},grid:{left:70,right:50,top:30,bottom:40},dataZoom:[{show:!0,type:"inside",start:50,end:100},{show:!0,top:"90%",bottom:"2%",start:50,end:100}],xAxis:{type:"category",boundaryGap:!1,data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{name:"Highest",type:"line",data:[10,11,13,11,12,12,9]},{name:"Lowest",type:"line",data:[1,-2,2,5,3,2,0]}]}}},watch:{timeUnit:function(){this.loadData()},dateTimeFilter:function(){this.loadData()}},methods:{loadData:function(){var t=this,e=0===this.timeUnit?"hour":"day",i="alert/alerts2/groupby/",a={by:"channel__cno,".concat(e),count:"id"};this.dateTimeFilter&&(a=bt(bt({},a),this.dateTimeFilter)),l["a"].apiAjaxGet(i,a,(function(i){if(0===i.code&&i.data){var a,r=Object(ft["a"])(new Set(i.data.map((function(t){return t[e]})))).sort(),n=Object(ft["a"])(new Set(i.data.map((function(t){return t.channel__cno})))).sort(),s={};for(var o in n.forEach((function(t){s[t]=new Array(r.length).fill(0)})),i.data.forEach((function(t){var i=r.indexOf(t[e]);i>=0&&(s[t.channel__cno][i]=t.count_id)})),r=r.map((function(e){var i=new Date(e);return 0===t.timeUnit?_t()(i).format("YYYY-MM-DDTHH:00"):_t()(i).format("YYYY-MM-DD")})),a=r.length<=10?0:100*(r.length-10)/r.length,t.option.dataZoom[0].start=a,t.option.dataZoom[1].start=a,t.option.dataZoom[0].end=100,t.option.dataZoom[1].end=100,t.option.xAxis.data=r,t.option.series=[],s)t.option.series.push({name:"通道编号-".concat(o),type:"line",data:s[o]})}}),c["a"].defaultApiErrorHandler(i,""))}},mounted:function(){this.loadData()}},yt=vt,wt=(i("51d4"),Object(I["a"])(yt,ut,pt,!1,null,"4a8362e6",null)),Ct=wt.exports,Ot=function(){var t=this,e=t._self._c;return e("ECharts",{staticClass:"disk-usage-chart",attrs:{options:t.option}})},xt=[],Tt=(i("07e6"),{name:"DiskUsageChart",components:{ECharts:G},data:function(){return{option:{series:[{type:"gauge",progress:{show:!0,width:18},axisLine:{lineStyle:{width:18}},axisTick:{show:!1},splitLine:{length:15,lineStyle:{width:2,color:"#999"}},axisLabel:{distance:25,color:"#999",fontSize:10},anchor:{show:!0,showAbove:!0,size:25,itemStyle:{borderWidth:10}},title:{show:!1},detail:{valueAnimation:!0,fontSize:20,offsetCenter:[0,"70%"]},data:[{value:80}]}]}}},mounted:function(){var t=this,e="system/projectinfos/get_disk_stats/";l["a"].apiAjaxGet(e,{},(function(e){0===e.code&&e.data&&(t.option.series[0].data[0].value=Math.round((e.data.size-e.data.free)/e.data.size*100),console.log("get_disk_stats ",e.data,t.option.series[0].data.value))}),c["a"].defaultApiErrorHandler(e,""))}}),jt=Tt,zt=(i("d593"),Object(I["a"])(jt,Ot,xt,!1,null,"5e489320",null)),St=zt.exports,Dt=i("4d92"),At=i("8cba"),Et=function(){var t=this,e=t._self._c;return e("SimpleModalDlg",{attrs:{modalId:t.modalId,dialogWidth:700,title:t.chartType,defaultButtonText:""},scopedSlots:t._u([{key:"bodyPost",fn:function(){return[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},["告警地点"==t.chartType?e("div",{staticClass:"col big-chart-container"},[e("AlertSiteStatsChart",{attrs:{dateTimeFilter:t.dateTimeFilter}})],1):t._e(),"告警类型"==t.chartType?e("div",{staticClass:"col big-chart-container"},[e("AlertTypeStatsChart",{attrs:{dateTimeFilter:t.dateTimeFilter}})],1):t._e(),"告警数量"==t.chartType?e("div",{staticClass:"col big-chart-container"},[e("AlertTypeStatsChartBar",{attrs:{dateTimeFilter:t.dateTimeFilter}})],1):t._e(),"磁盘占比"==t.chartType?e("div",{staticClass:"col big-chart-container"},[e("DiskUsageChart")],1):t._e()])])]},proxy:!0}])})},Ft=[],Pt=i("f953"),kt={name:"AlertStatsBigChartDlg",components:{SimpleModalDlg:Pt["a"],AlertSiteStatsChart:at,AlertTypeStatsChart:X,AlertTypeStatsChartBar:ht,DiskUsageChart:St},data:function(){return{}},props:{modalId:{type:String,required:!0},dateTimeFilter:{type:Object,required:!1,default:null},chartType:{type:String,required:!1,default:null}},computed:{},methods:{},watch:{},mounted:function(){}},Mt=kt,Ut=(i("4204"),Object(I["a"])(Mt,Et,Ft,!1,null,null,null)),Ht=Ut.exports,Lt=i("1157"),Rt=i.n(Lt),Wt={name:"ModuleDashboard",components:{AlertSiteStatsChart:at,AlertTypeStatsChart:X,AlertTypeStatsChartBar:ht,AlertChannelStatsChart:Ct,DiskUsageChart:St,SimpleSelect:Dt["a"],DateTimeRangePicker:At["a"],AlertStatsBigChartDlg:Ht},data:function(){return{bigChartDlgId:c["a"].randomId("modalId"),channelStatsTimeUnit:0,dateTimeRange:At["a"].getDefaultRange(),dateTimeFilter:At["a"].rangeToFilter(At["a"].getDefaultRange()),countAlgorithms:0,configuredAlgorithms:0,configuredChannels:0,bigChartType0:"",bigChartType:""}},computed:{},methods:{getOutlines:function(){var t=this,e="algorithm/algorithms/groupby/?by=id&count=id";l["a"].apiAjaxGet(e,{},(function(e){0===e.code&&e.data&&(t.countAlgorithms=e.data.length)}),c["a"].defaultApiErrorHandler(e,"")),e="channel/channelalgorithms/groupby/?by=algorithm&count=id",l["a"].apiAjaxGet(e,{},(function(e){0===e.code&&e.data&&(t.configuredAlgorithms=e.data.length)}),c["a"].defaultApiErrorHandler(e,"")),e="channel/channelalgorithms/groupby/?by=channel&count=id",l["a"].apiAjaxGet(e,{},(function(e){0===e.code&&e.data&&(t.configuredChannels=e.data.length)}),c["a"].defaultApiErrorHandler(e,""))}},watch:{dateTimeRange:function(){this.dateTimeRange&&(this.dateTimeFilter=At["a"].rangeToFilter(this.dateTimeRange))}},mounted:function(){var t=this;this.getOutlines(),Rt()("#".concat(this.bigChartDlgId)).on("shown.bs.modal",(function(){t.bigChartType=t.bigChartType0}))}},It=Wt,Bt=(i("2706"),Object(I["a"])(It,a,r,!1,null,null,null));e["default"]=Bt.exports},ffd6:function(t,e,i){var a=i("3729"),r=i("1310"),n="[object Symbol]";function s(t){return"symbol"==typeof t||r(t)&&a(t)==n}t.exports=s}}]);